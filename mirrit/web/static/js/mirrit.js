// Generated by CoffeeScript 1.6.3
(function() {
  $(function() {
    var clickHandler;
    clickHandler = function(event) {
      var el, name, path, val;
      event.preventDefault();
      el = $(this);
      name = null;
      val = null;
      path = encodeURIComponent(el.parents('tr').find('a.repo-name:first').attr('href'));
      if (el.data('github') === 'tracked') {
        name = 'Track';
        val = 'untracked';
        $.ajax({
          type: 'DELETE',
          url: "/repos/?path=" + path
        });
      } else {
        name = 'Untrack';
        val = 'tracked';
        $.post("/repos/?path=" + path);
      }
      el.data('github', val);
      el.attr('data-github', val);
      el.toggleClass('btn-primary');
      el.parents('tr').toggleClass('tracked');
      return el.html(name);
    };
    return $('button[data-github]').click(clickHandler);
  });

}).call(this);
